<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<title>5绘制图形</title>
<link rel="stylesheet" type="text/css" href="../../css/html5/main.css">
<script type="text/javascript" src="./js/5script.js"></script>
<style type="text/css">
div{
	float: left;
	text-align: center;
}
article a{
	color: blue; /* 设置文字颜色 */
	text-decoration: none; /* 去掉下划线 */
}
article a:hover{
	/* background: #2E7AAD; */
	color: red;
	/* font-weight: bold; */
}
</style>
</head>
<body>
<header style="display: none;">
	<ul>
		<li><a href="#5.1">5.1 canvas元素的基础知识</a></li>
		<li><a href="#5.1.1">5.1.1 在页面中放置canvas元素</a></li>
		<li><a href="#5.1.2">5.1.2 绘制矩形</a></li>
		<li><a href="#5.2">5.2 使用路径</a></li>
		<li><a href="#5.2.1">5.2.1 绘制圆形</a></li>
		<li><a href="#5.2.2">5.2.2 如果没有关闭路径会怎样</a></li>
		<li><a href="#5.2.3">5.2.3 moveTo与lineTo</a></li>
		<li><a href="#5.2.4">5.2.4 使用bezierCurveTo绘制贝济埃曲线</a></li>
		<li><a href="#5.3">5.3 绘制渐变图形</a></li>
		<li><a href="#5.3.1">5.3.1 绘制线性渐变</a></li>
		<li><a href="#5.3.2">5.3.2 绘制径向渐变</a></li>
		<li><a href="#5.4">5.4 绘制变形图形</a></li>
		<li><a href="#5.4.1">5.4.1 坐标变换</a></li>
		<li><a href="#5.4.2">5.4.2 坐标变换与路径的结合使用</a></li>
		<li><a href="#5.4.3">5.4.3 矩阵变换</a></li>
		<li><a href="#5.5">5.5 图形组合</a></li>
		<li><a href="#5.6">5.6 给图形绘制阴影</a></li>
		<li><a href="#5.7">5.7 使用图像</a></li>
		<li><a href="#5.7.1">5.7.1 绘制图像</a></li>
		<li><a href="#5.7.2">5.7.2 图像平铺</a></li>
		<li><a href="#5.7.3">5.7.3 图形裁剪</a></li>
		<li><a href="#5.7.4">5.7.4 像素处理</a></li>
		<li><a href="#5.8">5.8 绘制文字</a></li>
		<li><a href="#5.9">5.9 补充知识</a></li>
		<li><a href="#5.9.1">5.9.1 保存与恢复状态</a></li>
		<li><a href="#5.9.2">5.9.2 保存文件</a></li>
		<li><a href="#5.9.3">5.9.3 简单动画的制作</a></li>
	</ul>
</header>
<article id="5.1.2">
	<h1>5.1.2绘制矩形</h1>
	<a href="#canvas_div52">代码清单5-2 绘制矩形</a>
</article>
<article id="5.2.1">
	<h1>5.2.1绘制圆形</h1>
	<a href="#canvas_div53">代码清单5-3 绘制圆形</a>
</article>
<article id="5.2.2">
	<h1>5.2.2 重叠绘制</h1>
	<a href="#canvas_div54">代码清单5-4 重叠绘制</a>
</article>
<article id="5.2.3">
	<h1>5.2.3 moveTo与lineTo绘制复杂图形</h1>
	<p>绘制直线时，一般会用到moveTo与lineTo两种方法。
	<ul>
		<li>moveTo(x,y) 绘制直线的时候以这个坐标点为起点。
		<li>lineTo(x,y) lineTo方法在moveTo方法中指定的直线起点与参数中指定的直线终点之间绘制一条直线。
	</ul>
	<a href="#canvas_div55">代码清单5-5 绘制复杂图形</a>
</article>
<article id="5.2.4">
	<h1>5.2.4 使用bezierCurveTo绘制贝济埃曲线</h1>
	<a href="#canvas_div56">代码清单5-6 绘制贝济埃曲线</a>
</article>
<article id="5.3.1">
	<h1>5.3.1 绘制线性渐变</h1>
	<a href="#canvas_div57">代码清单5-7 绘制线性渐变</a>
</article>
<article id="5.3.2">
	<h1>5.3.2 绘制径向渐变</h1>
	<a href="#canvas_div58">代码清单5-8 绘制径向渐变</a>
</article>
<article id="5.4">
	<h1>5.4绘制变形图形</h1>
	<section id="5.4.1">
		<h1>5.4.1 坐标变换</h1>
		<a href="#canvas_div59">代码清单5-9 坐标变换</a>
		<p>绘制图形的时候，我们可能经常会想要旋转图形，或者对图形使用变形处理，使用Canvas API的坐标轴变换处理功能，可以实现这种效果。
		<p>在计算机上绘制图形的时候，是以坐标单位为基准来进行图形绘制的。默认情况下，Canvas画布的最左上角对应于坐标轴原点（0，0）。
		前面我们所讲的所有利用Canvas API绘制出来的图形都是以画布的最左上角为坐标轴原点，并以一个像素为一个坐标单位来进行绘制的。
		<p>如果对这个坐标使用变换处理，就可以实现图形的变形处理了。对坐标的的变换处理，有一下三种方式：
		<p><strong>平移</strong>
		<p>使用图形上下文对象的translate方法移动坐标轴原点。
	<xmp>
	context.translate(x, y);
	</xmp>
		<p>x表示将坐标轴原点向左移动多少个单位，默认情况下为像素；y表示将坐标轴原点向下移动多少个单位。
		<p><strong>扩大</strong>
		<p>使用图形上下文对象的scale方法将图形放大。
	<xmp>
	context.scale(x, y);
	</xmp>
		<p>x是水平方向的放大倍数，y是垂直方向的放大倍数。将图形缩小的时候，将这两个参数设为0到1之间的小数就可以了，譬如0.5是指将图形缩小一半。
		<p><strong>旋转</strong>
		<p>使用图形上下文对象的rotate方法将图形进行旋转。
	<xmp>
	context.rotate(angle);
	</xmp>
		<p>rotate方法接受一个参数angle，angle是指旋转的角度，旋转的中心点是坐标轴的原点。
		旋转是以顺时针方向进行的，要想逆时针旋转时，将angle设定为复数就可以了。
	</section>
	<section id="5.4.2">
		<h1>5.4.2 坐标变换与路径的结合使用</h1>
		<a href="#canvas_div510">代码清单5-10 坐标变换与路径结合使用</a>
		<p>如果要对矩形进行变形，使用坐标变换就足够了。但是对使用路径绘制出来的图形进行变换的时候，要考虑的事情就比较多了。
		因为使用了坐标变换之后，已经创建好的路径就不能用了。必须要重新创建路径。重新创建好路径之后，坐标变换方法又失效了。
		<p>那么怎么办呢？必须先另外写一个创建路径的函数，然后在坐标变换的同时调用该函数，这样才能解决这个问题。
		在代码清单5-10中，我们给出一个将坐标变换与路径结合使用的示例。执行该示例代码，可以绘制一个将五角星一边旋转一边缩小的图形。
		<p>在示例中，首先单独书写一个create5Star的函数，在函数中创建了一个五角星的路径。
		然后在draw函数中的for循环中，首先一次执行translate、scale、rotate方法，然后指向create5Star函数创建路径，
		最后执行fill填充。
		<p>在create5Star函数中，只创建了一个五角星，因为坐标轴变换，在Cancas画布中，此五角星会一边缩小一边旋转，
		之后产生一个新的五角星，新的五角星又采用同样的方法进行绘制，最终绘制出来一连串具有变形效果的五角星的图形。
	</section>
	<section id="5.4.3">
		<h1>5.4.3 矩阵变换</h1>
		<xmp>
	context.transform(m11,m12,m21,m22,dx,dy);
		</xmp>
		<a href="#canvas_div511">代码清单5-11 用transform方法实现变形</a>
		<p>translate(x,y)  可以使用context.transform(1,0,0,1,x,y)或context.transform(0,1,1,0,x,y)方法进行代替，
		前面四个参数1,0,0,1或0,1,1,0表示不对图形进行缩放操作，变形操作，
		将dx设为x表示将坐标原点向右移动x个单位，dy设为y表示将坐标原点向下移动y个单位。
		<p>scale(x,y)  可以使用context.transform(x,0,0,y,0,0)或context.transform(0,y,x,0,0,0)方法代替，
		前面四个参数x,0,0,y或0,y,x,0表示将图标横向扩大x倍，纵向扩大y倍。dx,dy为0表示不移动坐标原点。
		<p>rotate(angle)  替换方法如下所示。
		<xmp>
		context.transform(Math.cos(angle*Math.PI/180),
			Math.sin(angle*Math.PI/180),
			-Math.sin(angle*Math.PI/180),
			Math.cos(angle*Math.PI/180), 0,0);
		或
		context.transform(-Math.sin(angle*Math.PI/180),
			Math.cos(angle*Math.PI/180),
			Math.cos(angle*Math.PI/180),
			Math.sin(angle*Math.PI/180), 0,0);
		</xmp>
		<p>使用了transform方法后，接下来要绘制的图形都会按照移动后的坐标原点与新的变换矩阵相结合的方法进行绘制，
		必要时可以使用setTransform方法将变换矩阵进行重置，setTransform方法的定义如下所示。
		<xmp>
		context.setTransform(m11,m12,m21,m22,dx,dy);
		</xmp>
		<a href="#canvas_div512">代码清单2-12 使用setTransform方法绘制变形图形</a>
		<p>setTransform方法的参数及参数的用法与transform相同，事实上，该方法的作用为将画布上的最坐上角重置为坐标原点，
		当图形上下文创建完毕时将所创建的初始变换矩阵设置为当前变换矩阵，然后使用transform方法。
		<p>
	</section>
</article>
<article id="5.5">
	<h1>5.5 图形组合</h1>
	<a href="#canvas_div13">代码清单2-13 图形组合</a>
	<p>在HTML5中，只要用图形上下文对象的globalCompositeOperation属性就能自己决定图形的组合方式了，使用方法如下所示：
	<xmp>
	context.globalCompositeOperation = type
	</xmp>
	<p>type的值必须是下面几种字符串之一：
	<dl style="margin-left: 25px;">
		<dt>source-over(默认值)</dt>
			<dd>source-over为globalCompositeOperation属性的默认值，表示新图形覆盖在原有图形之上。</dd>
		<dt>destination-over</dt>
			<dd>表示在原有图形之下绘制新图形</dd>
		<dt>source-in</dt>
			<dd>新图形与原有图形作in运算，只显示新图形中与原有图形相重叠的部分，新图形与原有图形的其他部分均变成透明。</dd>
		<dt>destination-in</dt>
			<dd>原有图形与新图形作in运算，只显示原有图形中与新图形相重叠的部分，新图形与原有图形的其他部分均变成透明。</dd>
		<dt>source-out</dt>
			<dd>新图形与原有图形作out运算，只显示新图形中与原有图形不重叠的部分，新图形与原有图形的其他部分均变成透明。</dd>
		<dt>destination-out</dt>
			<dd>原有图形与原有图形作out运算，只显示原有图形中与原有图形不重叠的部分，新图形与原有图形的其他部分均变成透明。</dd>
		<dt>source-atop</dt>
			<dd>只绘制新图形中与原有图形重叠的部分与未给重叠覆盖的原有图形，新图形的其他部分变成透明。</dd>
		<dt>destination-atop</dt>
			<dd>只绘制原有图形中被新图形重叠覆盖的部分与新图形的其他部分，原有图形中的其他部分变成透明，不绘制新图形中与原有图形相重叠的部分。</dd>
		<dt>lighter</dt>
			<dd>原有图形与新图形均绘制，重叠部分做加色处理。</dd>
		<dt>xor</dt>
			<dd>只绘制新图形中与原有图形不重跌的部分，重叠部分变成透明。</dd>
		<dt>copy</dt>
			<dd>值绘制新图形，原有图形中未与新图形重叠的部分变成透明。</dd>
		
	</dl>
	<p>
</article>

<article id="">
	<h1></h1>
	<a href="#canvas_div"></a>
</article>


<div id="canvas_div52">
	<canvas id="canvas52" width="400" height="300"></canvas>
	<br>
	<span>代码清单5-2 绘制矩形</span>
</div>
<div id="canvas_div53">
	<canvas id="canvas53" width="400" height="300"></canvas>
	<br>
	<span>代码清单5-3 绘制圆形</span>
</div>
<div id="canvas_div54">
	<canvas id="canvas54" width="400" height="300"></canvas>
	<br>
	<span>代码清单5-4 重叠绘制</span>
</div>
<div id="canvas_div55">
	<canvas id="canvas55" width="400" height="300"></canvas>
	<br>
	<span>代码清单5-5 绘制复杂图形</span>
</div>
<div id="canvas_div56">
	<canvas id="canvas56" width="400" height="300"></canvas>
	<br>
	<span>代码清单5-6 绘制贝济埃曲线</span>
</div>
<div id="canvas_div57">
	<canvas id="canvas57" width="400" height="300"></canvas>
	<br>
	<span>代码清单5-7 绘制线性渐变</span>
</div>
<div id="canvas_div58">
	<canvas id="canvas58" width="400" height="300"></canvas>
	<br>
	<span>代码清单5-8 绘制径向渐变</span>
</div>
<div id="canvas_div59">
	<canvas id="canvas59" width="400" height="300"></canvas>
	<br>
	<span>代码清单5-9 坐标变换</span>
</div>
<div id="canvas_div510">
	<canvas id="canvas510" width="400" height="300"></canvas>
	<br>
	<span>代码清单5-10 坐标变换与路径结合使用</span>
</div>
<div id="canvas_div511">
	<canvas id="canvas511" width="400" height="300"></canvas>
	<br>
	<span>代码清单5-11 用transform方法实现变形</span>
</div>
<div id="canvas_div512">
	<canvas id="canvas512" width="400" height="300"></canvas>
	<br>
	<span>代码清单2-12 使用setTransform方法绘制变形图形</span>
</div>
<div id="canvas_div513">
	<canvas id="canvas513" width="400" height="300"></canvas>
	<br>
	<span>代码清单2-13 图形组合</span>
</div>

<div id="canvas_div5">
	<canvas id="canvas5" width="400" height="300"></canvas>
	<br>
	<span></span>
</div>

</body>
</html>