
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
</head>
<script type="text/javascript">
(function() {
	//var openUrl = window.location.search;
	var openUrl = "http://www.baidu.com";
	try{
		//openUrl = openUrl.substring(1,openUrl.length);
	}catch(e){
		console.log(e);
	}
	var isiOS = navigator.userAgent.match('iPad')
			|| navigator.userAgent.match('iPhone')
			|| navigator.userAgent.match('iPod'), 
		isAndroid = navigator.userAgent.match('Android'),
		isDesktop = !isiOS&&!isAndroid;
	if (isiOS) {
		alert("isiOS");
		setTimeout(function (){ 
			window.location = "itms-apps://itunes.apple.com/app/[name]/[id]?mt=8"; 
			},25);
		window.location = "[scheme]://[host]?url="+openUrl;
	}else if(isAndroid){
		alert("isAndroid");
		//window.location = "znndd://localhost/url="+openUrl+"#Intent;scheme=znn;package=com.zhijianlife;end";
		//window.open("znn://aa.bb:80/test?p=12&d=1");
		//window.location = "znn://aa.bb:80/test?p=12&d=1";
		/* var state = null;
	    try {
	    //  state = window.open("znn://aa.bb:80/test?p=12&d=1", "_blank");
	      state = window.location("znn://aa.bb:80/test?p=12&d=1");
	    } catch(e) {}
	    alert(state);
	    if (state) {
	      window.close();
	    } else {
	      window.location = "http://192.168.1.136";
	    } */
	    /* window.location = "znn://aa.bb:80/test?p=12&d=1";
         setTimeout(function(){
	     	window.location = "http://www.baidu.com";
         }, 5000);  */
         
        /*  var url = "znn://aa.bb:80/test?p=12&d=1";
         XMLHTTP = new ActiveXObject("Microsoft.XMLHTTP");
         XMLHTTP.open("HEAD",url,false);
         XMLHTTP.send();
         alert(XMLHTTP.status);
         return XMLHTTP.status==200 */
        document.getElementById("openApp").click = function(){
			var ifrSrc = "znn://";
			var ifr = document.createElement("iframe");
			ifr.src = ifrSrc;
			//ifr.style.display = "none";
			document.body.appendChild(ifr);
			/* setTimeout(function(){
				document.body.removeChild(ifr);
			}, 1000); */
         }
		//alert(document.all+"");
		if(document.all){
			alert("==");
			document.getElementById("openApp").click();
		}else {
			alert("==");
		//	var e = document.createEvent("MouseEvents");
		//	e.initEvent("click",true,true);
		//	document.getElementById("openApp")dispatchEvent(e);
		}
	}else{
		alert("isDesktop");
		window.location.href = openUrl;
	}
	console.log(openUrl);
})();

function testApp(url) {  
    var timeout, t = 1000, hasApp = true;  
    setTimeout(function () {  
        if (hasApp) {  
            alert('安装了app');  
        } else {  
            alert('未安装app');  
        }  
        document.body.removeChild(ifr);  
    }, 2000)  
  
    var t1 = Date.now();  
    var ifr = document.createElement("iframe");  
    ifr.setAttribute('src', url);  
    ifr.setAttribute('style', 'display:none');  
    document.body.appendChild(ifr);  
    timeout = setTimeout(function () {  
         var t2 = Date.now();  
         if (!t1 || t2 - t1 < t + 100) {  
             hasApp = false;  
         }  
    }, t);  
} 
</script>
<body>
	
<a id="openApp" style="" href="#">下载-APP</a>
</body>
</html>